{"version":3,"sources":["../../../src/common/interceptors/transform.interceptor.ts"],"sourcesContent":["import {\r\n    Injectable,\r\n    NestInterceptor,\r\n    ExecutionContext,\r\n    CallHandler,\r\n} from '@nestjs/common';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\nexport interface Response<T> {\r\n    success: boolean;\r\n    data: T;\r\n    message?: string;\r\n    meta?: {\r\n        page?: number;\r\n        limit?: number;\r\n        total?: number;\r\n        totalPages?: number;\r\n    };\r\n}\r\n\r\n@Injectable()\r\nexport class TransformInterceptor<T>\r\n    implements NestInterceptor<T, Response<T>> {\r\n    intercept(\r\n        context: ExecutionContext,\r\n        next: CallHandler,\r\n    ): Observable<Response<T>> {\r\n        return next.handle().pipe(\r\n            map((data) => {\r\n                // If data already has success property, return as is\r\n                if (data && typeof data === 'object' && 'success' in data) {\r\n                    return data;\r\n                }\r\n\r\n                return {\r\n                    success: true,\r\n                    data,\r\n                };\r\n            }),\r\n        );\r\n    }\r\n}\r\n"],"names":["TransformInterceptor","intercept","context","next","handle","pipe","map","data","success"],"mappings":";;;;+BAsBaA;;;eAAAA;;;wBAjBN;2BAEa;;;;;;;AAeb,IAAA,AAAMA,uBAAN,MAAMA;IAETC,UACIC,OAAyB,EACzBC,IAAiB,EACM;QACvB,OAAOA,KAAKC,MAAM,GAAGC,IAAI,CACrBC,IAAAA,cAAG,EAAC,CAACC;YACD,qDAAqD;YACrD,IAAIA,QAAQ,OAAOA,SAAS,YAAY,aAAaA,MAAM;gBACvD,OAAOA;YACX;YAEA,OAAO;gBACHC,SAAS;gBACTD;YACJ;QACJ;IAER;AACJ"}