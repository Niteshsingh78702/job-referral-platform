{"version":3,"sources":["../../../src/modules/employee/employee.controller.ts"],"sourcesContent":["import {\r\n  Controller,\r\n  Get,\r\n  Post,\r\n  Put,\r\n  Patch,\r\n  Body,\r\n  Param,\r\n  Query,\r\n} from '@nestjs/common';\r\nimport { EmployeeService } from './employee.service';\r\nimport {\r\n  UpdateEmployeeProfileDto,\r\n  ReferralFiltersDto,\r\n  EarningsFiltersDto,\r\n} from './dto';\r\nimport { CurrentUser, Roles } from '../../common/decorators';\r\nimport { UserRole } from '../../common/constants';\r\n\r\n@Controller('employees')\r\nexport class EmployeeController {\r\n  constructor(private readonly employeeService: EmployeeService) {}\r\n\r\n  @Get('profile')\r\n  @Roles(UserRole.EMPLOYEE)\r\n  async getProfile(@CurrentUser('sub') userId: string) {\r\n    return this.employeeService.getProfile(userId);\r\n  }\r\n\r\n  @Put('profile')\r\n  @Roles(UserRole.EMPLOYEE)\r\n  async updateProfile(\r\n    @CurrentUser('sub') userId: string,\r\n    @Body() dto: UpdateEmployeeProfileDto,\r\n  ) {\r\n    return this.employeeService.updateProfile(userId, dto);\r\n  }\r\n\r\n  @Get('dashboard/stats')\r\n  @Roles(UserRole.EMPLOYEE)\r\n  async getDashboardStats(@CurrentUser('sub') userId: string) {\r\n    return this.employeeService.getDashboardStats(userId);\r\n  }\r\n\r\n  @Get('available-referrals')\r\n  @Roles(UserRole.EMPLOYEE)\r\n  async getAvailableReferrals(\r\n    @CurrentUser('sub') userId: string,\r\n    @Query('search') search?: string,\r\n  ) {\r\n    return this.employeeService.getAvailableReferrals(userId, search);\r\n  }\r\n\r\n  @Get('referrals')\r\n  @Roles(UserRole.EMPLOYEE)\r\n  async getMyReferrals(\r\n    @CurrentUser('sub') userId: string,\r\n    @Query() filters: ReferralFiltersDto,\r\n  ) {\r\n    return this.employeeService.getMyReferrals(userId, filters);\r\n  }\r\n\r\n  @Post('referrals/:applicationId/confirm')\r\n  @Roles(UserRole.EMPLOYEE)\r\n  async confirmReferral(\r\n    @CurrentUser('sub') userId: string,\r\n    @Param('applicationId') applicationId: string,\r\n  ) {\r\n    return this.employeeService.confirmReferral(userId, applicationId);\r\n  }\r\n\r\n  @Get('earnings')\r\n  @Roles(UserRole.EMPLOYEE)\r\n  async getEarnings(\r\n    @CurrentUser('sub') userId: string,\r\n    @Query() filters: EarningsFiltersDto,\r\n  ) {\r\n    return this.employeeService.getEarnings(userId, filters);\r\n  }\r\n\r\n  @Get('tier')\r\n  @Roles(UserRole.EMPLOYEE)\r\n  async getCurrentTier(@CurrentUser('sub') userId: string) {\r\n    return this.employeeService.getCurrentTier(userId);\r\n  }\r\n\r\n  @Get('leaderboard')\r\n  @Roles(UserRole.EMPLOYEE)\r\n  async getLeaderboard(\r\n    @CurrentUser('sub') userId: string,\r\n    @Query('period') period?: 'month' | 'all',\r\n  ) {\r\n    return this.employeeService.getLeaderboard(userId, period || 'all');\r\n  }\r\n\r\n  @Get('notifications')\r\n  @Roles(UserRole.EMPLOYEE)\r\n  async getNotifications(\r\n    @CurrentUser('sub') userId: string,\r\n    @Query('limit') limit?: number,\r\n  ) {\r\n    return this.employeeService.getNotifications(userId, limit || 10);\r\n  }\r\n\r\n  @Patch('notifications/:id/read')\r\n  @Roles(UserRole.EMPLOYEE)\r\n  async markNotificationRead(\r\n    @CurrentUser('sub') userId: string,\r\n    @Param('id') notificationId: string,\r\n  ) {\r\n    return this.employeeService.markNotificationRead(userId, notificationId);\r\n  }\r\n\r\n  // Admin/HR endpoint to mark referral as hired\r\n  @Post('referrals/:referralId/mark-hired')\r\n  @Roles(UserRole.HR, UserRole.ADMIN)\r\n  async markReferralAsHired(@Param('referralId') referralId: string) {\r\n    return this.employeeService.markReferralAsHired(referralId);\r\n  }\r\n}\r\n"],"names":["EmployeeController","getProfile","userId","employeeService","updateProfile","dto","getDashboardStats","getAvailableReferrals","search","getMyReferrals","filters","confirmReferral","applicationId","getEarnings","getCurrentTier","getLeaderboard","period","getNotifications","limit","markNotificationRead","notificationId","markReferralAsHired","referralId","EMPLOYEE","HR","ADMIN"],"mappings":";;;;+BAoBaA;;;eAAAA;;;wBAXN;iCACyB;qBAKzB;4BAC4B;2BACV;;;;;;;;;;;;;;;AAGlB,IAAA,AAAMA,qBAAN,MAAMA;IAGX,MAEMC,WAAW,AAAoBC,MAAc,EAAE;QACnD,OAAO,IAAI,CAACC,eAAe,CAACF,UAAU,CAACC;IACzC;IAEA,MAEME,cACJ,AAAoBF,MAAc,EAClC,AAAQG,GAA6B,EACrC;QACA,OAAO,IAAI,CAACF,eAAe,CAACC,aAAa,CAACF,QAAQG;IACpD;IAEA,MAEMC,kBAAkB,AAAoBJ,MAAc,EAAE;QAC1D,OAAO,IAAI,CAACC,eAAe,CAACG,iBAAiB,CAACJ;IAChD;IAEA,MAEMK,sBACJ,AAAoBL,MAAc,EAClC,AAAiBM,MAAe,EAChC;QACA,OAAO,IAAI,CAACL,eAAe,CAACI,qBAAqB,CAACL,QAAQM;IAC5D;IAEA,MAEMC,eACJ,AAAoBP,MAAc,EAClC,AAASQ,OAA2B,EACpC;QACA,OAAO,IAAI,CAACP,eAAe,CAACM,cAAc,CAACP,QAAQQ;IACrD;IAEA,MAEMC,gBACJ,AAAoBT,MAAc,EAClC,AAAwBU,aAAqB,EAC7C;QACA,OAAO,IAAI,CAACT,eAAe,CAACQ,eAAe,CAACT,QAAQU;IACtD;IAEA,MAEMC,YACJ,AAAoBX,MAAc,EAClC,AAASQ,OAA2B,EACpC;QACA,OAAO,IAAI,CAACP,eAAe,CAACU,WAAW,CAACX,QAAQQ;IAClD;IAEA,MAEMI,eAAe,AAAoBZ,MAAc,EAAE;QACvD,OAAO,IAAI,CAACC,eAAe,CAACW,cAAc,CAACZ;IAC7C;IAEA,MAEMa,eACJ,AAAoBb,MAAc,EAClC,AAAiBc,MAAwB,EACzC;QACA,OAAO,IAAI,CAACb,eAAe,CAACY,cAAc,CAACb,QAAQc,UAAU;IAC/D;IAEA,MAEMC,iBACJ,AAAoBf,MAAc,EAClC,AAAgBgB,KAAc,EAC9B;QACA,OAAO,IAAI,CAACf,eAAe,CAACc,gBAAgB,CAACf,QAAQgB,SAAS;IAChE;IAEA,MAEMC,qBACJ,AAAoBjB,MAAc,EAClC,AAAakB,cAAsB,EACnC;QACA,OAAO,IAAI,CAACjB,eAAe,CAACgB,oBAAoB,CAACjB,QAAQkB;IAC3D;IAEA,8CAA8C;IAC9C,MAEMC,oBAAoB,AAAqBC,UAAkB,EAAE;QACjE,OAAO,IAAI,CAACnB,eAAe,CAACkB,mBAAmB,CAACC;IAClD;IAjGA,YAAY,AAAiBnB,eAAgC,CAAE;aAAlCA,kBAAAA;IAAmC;AAkGlE;;;+CA/FkBoB;;;;;;;;;;+CAMAA;;;;;;;;;;;;+CASAA;;;;;;;;;;+CAMAA;;;;;;;;;;;;+CASAA;;;;;;;;;;;;+CASAA;;;;;;;;;;;;+CASAA;;;;;;;;;;;;+CASAA;;;;;;;;;;+CAMAA;;;;;;;;;;;;+CASAA;;;;;;;;;;;;+CASAA;;;;;;;;;;;;+CAUAC,wBAAaC"}