{"version":3,"sources":["../../../src/modules/employee/employee.controller.ts"],"sourcesContent":["import {\r\n    Controller,\r\n    Get,\r\n    Post,\r\n    Put,\r\n    Patch,\r\n    Body,\r\n    Param,\r\n    Query,\r\n} from '@nestjs/common';\r\nimport { EmployeeService } from './employee.service';\r\nimport {\r\n    UpdateEmployeeProfileDto,\r\n    ReferralFiltersDto,\r\n    EarningsFiltersDto,\r\n} from './dto';\r\nimport { CurrentUser, Roles } from '../../common/decorators';\r\nimport { UserRole } from '../../common/constants';\r\n\r\n@Controller('employees')\r\nexport class EmployeeController {\r\n    constructor(private readonly employeeService: EmployeeService) { }\r\n\r\n    @Get('profile')\r\n    @Roles(UserRole.EMPLOYEE)\r\n    async getProfile(@CurrentUser('sub') userId: string) {\r\n        return this.employeeService.getProfile(userId);\r\n    }\r\n\r\n    @Put('profile')\r\n    @Roles(UserRole.EMPLOYEE)\r\n    async updateProfile(\r\n        @CurrentUser('sub') userId: string,\r\n        @Body() dto: UpdateEmployeeProfileDto\r\n    ) {\r\n        return this.employeeService.updateProfile(userId, dto);\r\n    }\r\n\r\n    @Get('dashboard/stats')\r\n    @Roles(UserRole.EMPLOYEE)\r\n    async getDashboardStats(@CurrentUser('sub') userId: string) {\r\n        return this.employeeService.getDashboardStats(userId);\r\n    }\r\n\r\n    @Get('available-referrals')\r\n    @Roles(UserRole.EMPLOYEE)\r\n    async getAvailableReferrals(\r\n        @CurrentUser('sub') userId: string,\r\n        @Query('search') search?: string\r\n    ) {\r\n        return this.employeeService.getAvailableReferrals(userId, search);\r\n    }\r\n\r\n    @Get('referrals')\r\n    @Roles(UserRole.EMPLOYEE)\r\n    async getMyReferrals(\r\n        @CurrentUser('sub') userId: string,\r\n        @Query() filters: ReferralFiltersDto\r\n    ) {\r\n        return this.employeeService.getMyReferrals(userId, filters);\r\n    }\r\n\r\n    @Post('referrals/:applicationId/confirm')\r\n    @Roles(UserRole.EMPLOYEE)\r\n    async confirmReferral(\r\n        @CurrentUser('sub') userId: string,\r\n        @Param('applicationId') applicationId: string\r\n    ) {\r\n        return this.employeeService.confirmReferral(userId, applicationId);\r\n    }\r\n\r\n    @Get('earnings')\r\n    @Roles(UserRole.EMPLOYEE)\r\n    async getEarnings(\r\n        @CurrentUser('sub') userId: string,\r\n        @Query() filters: EarningsFiltersDto\r\n    ) {\r\n        return this.employeeService.getEarnings(userId, filters);\r\n    }\r\n\r\n    @Get('tier')\r\n    @Roles(UserRole.EMPLOYEE)\r\n    async getCurrentTier(@CurrentUser('sub') userId: string) {\r\n        return this.employeeService.getCurrentTier(userId);\r\n    }\r\n\r\n    @Get('leaderboard')\r\n    @Roles(UserRole.EMPLOYEE)\r\n    async getLeaderboard(\r\n        @CurrentUser('sub') userId: string,\r\n        @Query('period') period?: 'month' | 'all'\r\n    ) {\r\n        return this.employeeService.getLeaderboard(userId, period || 'all');\r\n    }\r\n\r\n    @Get('notifications')\r\n    @Roles(UserRole.EMPLOYEE)\r\n    async getNotifications(\r\n        @CurrentUser('sub') userId: string,\r\n        @Query('limit') limit?: number\r\n    ) {\r\n        return this.employeeService.getNotifications(userId, limit || 10);\r\n    }\r\n\r\n    @Patch('notifications/:id/read')\r\n    @Roles(UserRole.EMPLOYEE)\r\n    async markNotificationRead(\r\n        @CurrentUser('sub') userId: string,\r\n        @Param('id') notificationId: string\r\n    ) {\r\n        return this.employeeService.markNotificationRead(userId, notificationId);\r\n    }\r\n\r\n    // Admin/HR endpoint to mark referral as hired\r\n    @Post('referrals/:referralId/mark-hired')\r\n    @Roles(UserRole.HR, UserRole.ADMIN)\r\n    async markReferralAsHired(@Param('referralId') referralId: string) {\r\n        return this.employeeService.markReferralAsHired(referralId);\r\n    }\r\n}\r\n"],"names":["EmployeeController","getProfile","userId","employeeService","updateProfile","dto","getDashboardStats","getAvailableReferrals","search","getMyReferrals","filters","confirmReferral","applicationId","getEarnings","getCurrentTier","getLeaderboard","period","getNotifications","limit","markNotificationRead","notificationId","markReferralAsHired","referralId","EMPLOYEE","HR","ADMIN"],"mappings":";;;;+BAoBaA;;;eAAAA;;;wBAXN;iCACyB;qBAKzB;4BAC4B;2BACV;;;;;;;;;;;;;;;AAGlB,IAAA,AAAMA,qBAAN,MAAMA;IAGT,MAEMC,WAAW,AAAoBC,MAAc,EAAE;QACjD,OAAO,IAAI,CAACC,eAAe,CAACF,UAAU,CAACC;IAC3C;IAEA,MAEME,cACF,AAAoBF,MAAc,EAClC,AAAQG,GAA6B,EACvC;QACE,OAAO,IAAI,CAACF,eAAe,CAACC,aAAa,CAACF,QAAQG;IACtD;IAEA,MAEMC,kBAAkB,AAAoBJ,MAAc,EAAE;QACxD,OAAO,IAAI,CAACC,eAAe,CAACG,iBAAiB,CAACJ;IAClD;IAEA,MAEMK,sBACF,AAAoBL,MAAc,EAClC,AAAiBM,MAAe,EAClC;QACE,OAAO,IAAI,CAACL,eAAe,CAACI,qBAAqB,CAACL,QAAQM;IAC9D;IAEA,MAEMC,eACF,AAAoBP,MAAc,EAClC,AAASQ,OAA2B,EACtC;QACE,OAAO,IAAI,CAACP,eAAe,CAACM,cAAc,CAACP,QAAQQ;IACvD;IAEA,MAEMC,gBACF,AAAoBT,MAAc,EAClC,AAAwBU,aAAqB,EAC/C;QACE,OAAO,IAAI,CAACT,eAAe,CAACQ,eAAe,CAACT,QAAQU;IACxD;IAEA,MAEMC,YACF,AAAoBX,MAAc,EAClC,AAASQ,OAA2B,EACtC;QACE,OAAO,IAAI,CAACP,eAAe,CAACU,WAAW,CAACX,QAAQQ;IACpD;IAEA,MAEMI,eAAe,AAAoBZ,MAAc,EAAE;QACrD,OAAO,IAAI,CAACC,eAAe,CAACW,cAAc,CAACZ;IAC/C;IAEA,MAEMa,eACF,AAAoBb,MAAc,EAClC,AAAiBc,MAAwB,EAC3C;QACE,OAAO,IAAI,CAACb,eAAe,CAACY,cAAc,CAACb,QAAQc,UAAU;IACjE;IAEA,MAEMC,iBACF,AAAoBf,MAAc,EAClC,AAAgBgB,KAAc,EAChC;QACE,OAAO,IAAI,CAACf,eAAe,CAACc,gBAAgB,CAACf,QAAQgB,SAAS;IAClE;IAEA,MAEMC,qBACF,AAAoBjB,MAAc,EAClC,AAAakB,cAAsB,EACrC;QACE,OAAO,IAAI,CAACjB,eAAe,CAACgB,oBAAoB,CAACjB,QAAQkB;IAC7D;IAEA,8CAA8C;IAC9C,MAEMC,oBAAoB,AAAqBC,UAAkB,EAAE;QAC/D,OAAO,IAAI,CAACnB,eAAe,CAACkB,mBAAmB,CAACC;IACpD;IAjGA,YAAY,AAAiBnB,eAAgC,CAAE;aAAlCA,kBAAAA;IAAoC;AAkGrE;;;+CA/FoBoB;;;;;;;;;;+CAMAA;;;;;;;;;;;;+CASAA;;;;;;;;;;+CAMAA;;;;;;;;;;;;+CASAA;;;;;;;;;;;;+CASAA;;;;;;;;;;;;+CASAA;;;;;;;;;;;;+CASAA;;;;;;;;;;+CAMAA;;;;;;;;;;;;+CASAA;;;;;;;;;;;;+CASAA;;;;;;;;;;;;+CAUAC,wBAAaC"}