{"version":3,"sources":["../../../src/modules/hr/hr.controller.ts"],"sourcesContent":["import {\r\n    Controller,\r\n    Post,\r\n    Body,\r\n    Get,\r\n    Put,\r\n    Delete,\r\n    Param,\r\n    Query,\r\n    Req,\r\n    HttpCode,\r\n    HttpStatus,\r\n    UseGuards,\r\n} from '@nestjs/common';\r\nimport { HRService } from './services';\r\nimport {\r\n    HRRegisterDto,\r\n    HRLoginDto,\r\n    UpdateHRProfileDto,\r\n    CreateJobDto,\r\n    UpdateJobStatusDto,\r\n    UpdateJobDto,\r\n} from './dto';\r\nimport { Public, CurrentUser, Roles } from '../../common/decorators';\r\nimport { RolesGuard } from '../../common/guards';\r\nimport { UserRole } from '../../common/constants';\r\n\r\n@Controller('hr')\r\nexport class HRController {\r\n    constructor(private readonly hrService: HRService) { }\r\n\r\n    // ==========================================\r\n    // Public Routes (No Auth Required)\r\n    // ==========================================\r\n\r\n    @Public()\r\n    @Post('auth/register')\r\n    @HttpCode(HttpStatus.CREATED)\r\n    async register(@Body() dto: HRRegisterDto, @Req() req: any) {\r\n        const deviceInfo = {\r\n            ip: req.ip || req.headers['x-forwarded-for'],\r\n            userAgent: req.headers['user-agent'],\r\n            deviceId: req.headers['x-device-id'],\r\n        };\r\n        return this.hrService.register(dto, deviceInfo);\r\n    }\r\n\r\n    @Public()\r\n    @Post('auth/login')\r\n    @HttpCode(HttpStatus.OK)\r\n    async login(@Body() dto: HRLoginDto, @Req() req: any) {\r\n        const deviceInfo = {\r\n            ip: req.ip || req.headers['x-forwarded-for'],\r\n            userAgent: req.headers['user-agent'],\r\n            deviceId: req.headers['x-device-id'],\r\n        };\r\n        return this.hrService.login(dto, deviceInfo);\r\n    }\r\n\r\n    // ==========================================\r\n    // Protected Routes (HR Only)\r\n    // ==========================================\r\n\r\n    @Get('profile')\r\n    @UseGuards(RolesGuard)\r\n    @Roles(UserRole.HR)\r\n    async getProfile(@CurrentUser('sub') userId: string) {\r\n        return this.hrService.getProfile(userId);\r\n    }\r\n\r\n    @Put('profile')\r\n    @UseGuards(RolesGuard)\r\n    @Roles(UserRole.HR)\r\n    async updateProfile(\r\n        @CurrentUser('sub') userId: string,\r\n        @Body() dto: UpdateHRProfileDto,\r\n    ) {\r\n        return this.hrService.updateProfile(userId, dto);\r\n    }\r\n\r\n    // ==========================================\r\n    // Dashboard Routes\r\n    // ==========================================\r\n\r\n    @Get('dashboard/stats')\r\n    @UseGuards(RolesGuard)\r\n    @Roles(UserRole.HR)\r\n    async getDashboardStats(@CurrentUser('sub') userId: string) {\r\n        return this.hrService.getDashboardStats(userId);\r\n    }\r\n\r\n    @Get('dashboard/activity')\r\n    @UseGuards(RolesGuard)\r\n    @Roles(UserRole.HR)\r\n    async getRecentActivity(\r\n        @CurrentUser('sub') userId: string,\r\n        @Query('limit') limit?: number,\r\n    ) {\r\n        return this.hrService.getRecentActivity(userId, limit || 10);\r\n    }\r\n\r\n    // ==========================================\r\n    // Job Management Routes\r\n    // ==========================================\r\n\r\n    @Get('jobs')\r\n    @UseGuards(RolesGuard)\r\n    @Roles(UserRole.HR)\r\n    async getJobs(\r\n        @CurrentUser('sub') userId: string,\r\n        @Query('status') status?: string,\r\n        @Query('page') page?: number,\r\n        @Query('limit') limit?: number,\r\n    ) {\r\n        return this.hrService.getJobs(userId, { status, page, limit });\r\n    }\r\n\r\n    @Post('jobs')\r\n    @UseGuards(RolesGuard)\r\n    @Roles(UserRole.HR)\r\n    @HttpCode(HttpStatus.CREATED)\r\n    async createJob(\r\n        @CurrentUser('sub') userId: string,\r\n        @Body() dto: CreateJobDto,\r\n    ) {\r\n        return this.hrService.createJob(userId, dto);\r\n    }\r\n\r\n    @Get('jobs/:jobId')\r\n    @UseGuards(RolesGuard)\r\n    @Roles(UserRole.HR)\r\n    async getJobById(\r\n        @CurrentUser('sub') userId: string,\r\n        @Param('jobId') jobId: string,\r\n    ) {\r\n        return this.hrService.getJobById(userId, jobId);\r\n    }\r\n\r\n    @Put('jobs/:jobId')\r\n    @UseGuards(RolesGuard)\r\n    @Roles(UserRole.HR)\r\n    async updateJob(\r\n        @CurrentUser('sub') userId: string,\r\n        @Param('jobId') jobId: string,\r\n        @Body() dto: UpdateJobDto,\r\n    ) {\r\n        return this.hrService.updateJob(userId, jobId, dto);\r\n    }\r\n\r\n    @Delete('jobs/:jobId')\r\n    @UseGuards(RolesGuard)\r\n    @Roles(UserRole.HR)\r\n    @HttpCode(HttpStatus.OK)\r\n    async deleteJob(\r\n        @CurrentUser('sub') userId: string,\r\n        @Param('jobId') jobId: string,\r\n    ) {\r\n        return this.hrService.deleteJob(userId, jobId);\r\n    }\r\n\r\n    @Put('jobs/:jobId/status')\r\n    @UseGuards(RolesGuard)\r\n    @Roles(UserRole.HR)\r\n    async updateJobStatus(\r\n        @CurrentUser('sub') userId: string,\r\n        @Param('jobId') jobId: string,\r\n        @Body() dto: UpdateJobStatusDto,\r\n    ) {\r\n        return this.hrService.updateJobStatus(userId, jobId, dto);\r\n    }\r\n\r\n    // ==========================================\r\n    // Application Management Routes\r\n    // ==========================================\r\n\r\n    @Get('applications')\r\n    @UseGuards(RolesGuard)\r\n    @Roles(UserRole.HR)\r\n    async getApplications(\r\n        @CurrentUser('sub') userId: string,\r\n        @Query('jobId') jobId?: string,\r\n        @Query('status') status?: string,\r\n        @Query('page') page?: number,\r\n        @Query('limit') limit?: number,\r\n    ) {\r\n        return this.hrService.getApplications(userId, { jobId, status, page, limit });\r\n    }\r\n\r\n    @Post('applications/:applicationId/reject')\r\n    @UseGuards(RolesGuard)\r\n    @Roles(UserRole.HR)\r\n    @HttpCode(HttpStatus.OK)\r\n    async rejectApplication(\r\n        @CurrentUser('sub') userId: string,\r\n        @Param('applicationId') applicationId: string,\r\n        @Body() dto: { reason?: string },\r\n    ) {\r\n        return this.hrService.rejectApplication(userId, applicationId, dto.reason);\r\n    }\r\n}\r\n"],"names":["HRController","register","dto","req","deviceInfo","ip","headers","userAgent","deviceId","hrService","login","getProfile","userId","updateProfile","getDashboardStats","getRecentActivity","limit","getJobs","status","page","createJob","getJobById","jobId","updateJob","deleteJob","updateJobStatus","getApplications","rejectApplication","applicationId","reason","CREATED","OK","HR"],"mappings":"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"}