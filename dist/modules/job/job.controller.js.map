{"version":3,"sources":["../../../src/modules/job/job.controller.ts"],"sourcesContent":["import {\r\n  Controller,\r\n  Get,\r\n  Post,\r\n  Patch,\r\n  Delete,\r\n  Body,\r\n  Param,\r\n  Query,\r\n} from '@nestjs/common';\r\nimport { JobService } from './job.service';\r\nimport { CreateJobDto, UpdateJobDto, ApplyJobDto, JobQueryDto } from './dto';\r\nimport { Public, CurrentUser, Roles } from '../../common/decorators';\r\nimport { UserRole, JobStatus } from '../../common/constants';\r\n\r\n@Controller('jobs')\r\nexport class JobController {\r\n  constructor(private readonly jobService: JobService) { }\r\n\r\n  @Public()\r\n  @Get()\r\n  async getActiveJobs(@Query() query: JobQueryDto) {\r\n    return this.jobService.getActiveJobs(query);\r\n  }\r\n\r\n  @Public()\r\n  @Get(':idOrSlug')\r\n  async getJob(@Param('idOrSlug') idOrSlug: string) {\r\n    return this.jobService.getJobById(idOrSlug);\r\n  }\r\n\r\n  @Post()\r\n  @Roles(UserRole.HR, UserRole.ADMIN)\r\n  async createJob(\r\n    @CurrentUser('sub') userId: string,\r\n    @Body() dto: CreateJobDto,\r\n  ) {\r\n    return this.jobService.createJob(userId, dto);\r\n  }\r\n\r\n  @Patch(':id')\r\n  @Roles(UserRole.HR, UserRole.ADMIN)\r\n  async updateJob(\r\n    @Param('id') jobId: string,\r\n    @CurrentUser('sub') userId: string,\r\n    @Body() dto: UpdateJobDto,\r\n  ) {\r\n    return this.jobService.updateJob(jobId, userId, dto);\r\n  }\r\n\r\n  @Get(':id/apply-eligibility')\r\n  @Roles(UserRole.CANDIDATE)\r\n  async getApplyEligibility(\r\n    @Param('id') jobId: string,\r\n    @CurrentUser('sub') userId: string,\r\n  ) {\r\n    return this.jobService.getApplyEligibility(jobId, userId);\r\n  }\r\n\r\n  @Post(':id/apply')\r\n  @Roles(UserRole.CANDIDATE)\r\n  async applyForJob(\r\n    @Param('id') jobId: string,\r\n    @CurrentUser('sub') userId: string,\r\n    @Body() dto: ApplyJobDto,\r\n  ) {\r\n    return this.jobService.applyForJob(jobId, userId, dto);\r\n  }\r\n\r\n  @Get('hr/my-jobs')\r\n  @Roles(UserRole.HR)\r\n  async getMyJobs(\r\n    @CurrentUser('sub') userId: string,\r\n    @Query('status') status?: string,\r\n  ) {\r\n    return this.jobService.getHRJobs(userId, status as JobStatus | undefined);\r\n  }\r\n}\r\n"],"names":["JobController","getActiveJobs","query","jobService","getJob","idOrSlug","getJobById","createJob","userId","dto","updateJob","jobId","getApplyEligibility","applyForJob","getMyJobs","status","getHRJobs","HR","ADMIN","CANDIDATE"],"mappings":";;;;+BAgBaA;;;eAAAA;;;wBAPN;4BACoB;qBAC0C;4BAC1B;2BACP;;;;;;;;;;;;;;;AAG7B,IAAA,AAAMA,gBAAN,MAAMA;IAGX,MAEMC,cAAc,AAASC,KAAkB,EAAE;QAC/C,OAAO,IAAI,CAACC,UAAU,CAACF,aAAa,CAACC;IACvC;IAEA,MAEME,OAAO,AAAmBC,QAAgB,EAAE;QAChD,OAAO,IAAI,CAACF,UAAU,CAACG,UAAU,CAACD;IACpC;IAEA,MAEME,UACJ,AAAoBC,MAAc,EAClC,AAAQC,GAAiB,EACzB;QACA,OAAO,IAAI,CAACN,UAAU,CAACI,SAAS,CAACC,QAAQC;IAC3C;IAEA,MAEMC,UACJ,AAAaC,KAAa,EAC1B,AAAoBH,MAAc,EAClC,AAAQC,GAAiB,EACzB;QACA,OAAO,IAAI,CAACN,UAAU,CAACO,SAAS,CAACC,OAAOH,QAAQC;IAClD;IAEA,MAEMG,oBACJ,AAAaD,KAAa,EAC1B,AAAoBH,MAAc,EAClC;QACA,OAAO,IAAI,CAACL,UAAU,CAACS,mBAAmB,CAACD,OAAOH;IACpD;IAEA,MAEMK,YACJ,AAAaF,KAAa,EAC1B,AAAoBH,MAAc,EAClC,AAAQC,GAAgB,EACxB;QACA,OAAO,IAAI,CAACN,UAAU,CAACU,WAAW,CAACF,OAAOH,QAAQC;IACpD;IAEA,MAEMK,UACJ,AAAoBN,MAAc,EAClC,AAAiBO,MAAe,EAChC;QACA,OAAO,IAAI,CAACZ,UAAU,CAACa,SAAS,CAACR,QAAQO;IAC3C;IA3DA,YAAY,AAAiBZ,UAAsB,CAAE;aAAxBA,aAAAA;IAA0B;AA4DzD;;;;;;;;;;;;;;;;;;;;;;;+CA7CkBc,wBAAaC;;;;;;;;;;;;+CASbD,wBAAaC;;;;;;;;;;;;;;+CAUbC;;;;;;;;;;;;+CASAA;;;;;;;;;;;;;;+CAUAF"}