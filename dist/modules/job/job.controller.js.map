{"version":3,"sources":["../../../src/modules/job/job.controller.ts"],"sourcesContent":["import {\r\n    Controller,\r\n    Get,\r\n    Post,\r\n    Patch,\r\n    Delete,\r\n    Body,\r\n    Param,\r\n    Query,\r\n} from '@nestjs/common';\r\nimport { JobService } from './job.service';\r\nimport { CreateJobDto, UpdateJobDto, ApplyJobDto, JobQueryDto } from './dto';\r\nimport { Public, CurrentUser, Roles } from '../../common/decorators';\r\nimport { UserRole, JobStatus } from '../../common/constants';\r\n\r\n@Controller('jobs')\r\nexport class JobController {\r\n    constructor(private readonly jobService: JobService) { }\r\n\r\n    @Public()\r\n    @Get()\r\n    async getActiveJobs(@Query() query: JobQueryDto) {\r\n        return this.jobService.getActiveJobs(query);\r\n    }\r\n\r\n    @Public()\r\n    @Get(':idOrSlug')\r\n    async getJob(@Param('idOrSlug') idOrSlug: string) {\r\n        return this.jobService.getJobById(idOrSlug);\r\n    }\r\n\r\n    @Post()\r\n    @Roles(UserRole.HR, UserRole.ADMIN)\r\n    async createJob(\r\n        @CurrentUser('sub') userId: string,\r\n        @Body() dto: CreateJobDto,\r\n    ) {\r\n        return this.jobService.createJob(userId, dto);\r\n    }\r\n\r\n    @Patch(':id')\r\n    @Roles(UserRole.HR, UserRole.ADMIN)\r\n    async updateJob(\r\n        @Param('id') jobId: string,\r\n        @CurrentUser('sub') userId: string,\r\n        @Body() dto: UpdateJobDto,\r\n    ) {\r\n        return this.jobService.updateJob(jobId, userId, dto);\r\n    }\r\n\r\n    @Post(':id/apply')\r\n    @Roles(UserRole.CANDIDATE)\r\n    async applyForJob(\r\n        @Param('id') jobId: string,\r\n        @CurrentUser('sub') userId: string,\r\n        @Body() dto: ApplyJobDto,\r\n    ) {\r\n        return this.jobService.applyForJob(jobId, userId, dto);\r\n    }\r\n\r\n    @Get('hr/my-jobs')\r\n    @Roles(UserRole.HR)\r\n    async getMyJobs(\r\n        @CurrentUser('sub') userId: string,\r\n        @Query('status') status?: JobStatus,\r\n    ) {\r\n        return this.jobService.getHRJobs(userId, status);\r\n    }\r\n}\r\n"],"names":["JobController","getActiveJobs","query","jobService","getJob","idOrSlug","getJobById","createJob","userId","dto","updateJob","jobId","applyForJob","getMyJobs","status","getHRJobs","HR","ADMIN","CANDIDATE"],"mappings":";;;;+BAgBaA;;;eAAAA;;;wBAPN;4BACoB;qBAC0C;4BAC1B;2BACP;;;;;;;;;;;;;;;AAG7B,IAAA,AAAMA,gBAAN,MAAMA;IAGT,MAEMC,cAAc,AAASC,KAAkB,EAAE;QAC7C,OAAO,IAAI,CAACC,UAAU,CAACF,aAAa,CAACC;IACzC;IAEA,MAEME,OAAO,AAAmBC,QAAgB,EAAE;QAC9C,OAAO,IAAI,CAACF,UAAU,CAACG,UAAU,CAACD;IACtC;IAEA,MAEME,UACF,AAAoBC,MAAc,EAClC,AAAQC,GAAiB,EAC3B;QACE,OAAO,IAAI,CAACN,UAAU,CAACI,SAAS,CAACC,QAAQC;IAC7C;IAEA,MAEMC,UACF,AAAaC,KAAa,EAC1B,AAAoBH,MAAc,EAClC,AAAQC,GAAiB,EAC3B;QACE,OAAO,IAAI,CAACN,UAAU,CAACO,SAAS,CAACC,OAAOH,QAAQC;IACpD;IAEA,MAEMG,YACF,AAAaD,KAAa,EAC1B,AAAoBH,MAAc,EAClC,AAAQC,GAAgB,EAC1B;QACE,OAAO,IAAI,CAACN,UAAU,CAACS,WAAW,CAACD,OAAOH,QAAQC;IACtD;IAEA,MAEMI,UACF,AAAoBL,MAAc,EAClC,AAAiBM,MAAkB,EACrC;QACE,OAAO,IAAI,CAACX,UAAU,CAACY,SAAS,CAACP,QAAQM;IAC7C;IAlDA,YAAY,AAAiBX,UAAsB,CAAE;aAAxBA,aAAAA;IAA0B;AAmD3D;;;;;;;;;;;;;;;;;;;;;;;+CApCoBa,wBAAaC;;;;;;;;;;;;+CASbD,wBAAaC;;;;;;;;;;;;;;+CAUbC;;;;;;;;;;;;;;+CAUAF"}