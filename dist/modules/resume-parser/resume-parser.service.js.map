{"version":3,"sources":["../../../src/modules/resume-parser/resume-parser.service.ts"],"sourcesContent":["import { Injectable } from '@nestjs/common';\r\n// eslint-disable-next-line @typescript-eslint/no-var-requires\r\nconst pdfParse = require('pdf-parse');\r\n// eslint-disable-next-line @typescript-eslint/no-var-requires  \r\nconst mammoth = require('mammoth');\r\n\r\nexport interface ParsedResumeData {\r\n    text: string;\r\n    JobSkill: string[];\r\n    experience: {\r\n        years: number;\r\n        positions: string[];\r\n    };\r\n    education: string[];\r\n}\r\n\r\n@Injectable()\r\nexport class ResumeParserService {\r\n    private readonly skillKeywords = [\r\n        'javascript', 'typescript', 'python', 'java', 'c++', 'c#', 'ruby', 'php', 'swift', 'kotlin',\r\n        'react', 'angular', 'vue', 'node', 'express', 'nestjs', 'django', 'flask', 'spring',\r\n        'mongodb', 'postgresql', 'mysql', 'redis', 'elasticsearch',\r\n        'aws', 'azure', 'gcp', 'docker', 'kubernetes', 'jenkins', 'git', 'linux',\r\n        'html', 'css', 'sass', 'tailwind', 'bootstrap',\r\n        'rest api', 'graphql', 'microservices', 'agile', 'scrum',\r\n        'machine learning', 'ai', 'data science', 'tensorflow', 'pytorch',\r\n    ];\r\n\r\n    async parseResume(file: Express.Multer.File): Promise<ParsedResumeData> {\r\n        let text = '';\r\n\r\n        try {\r\n            // Parse PDF\r\n            if (file.mimetype === 'application/pdf') {\r\n                const data = await pdfParse(file.buffer);\r\n                text = data.text;\r\n            }\r\n            // Parse DOC/DOCX\r\n            else if (\r\n                file.mimetype === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' ||\r\n                file.mimetype === 'application/msword'\r\n            ) {\r\n                const result = await mammoth.extractRawText({ buffer: file.buffer });\r\n                text = result.value;\r\n            }\r\n\r\n            const skills = this.extractSkills(text);\r\n            const experience = this.extractExperience(text);\r\n            const education = this.extractEducation(text);\r\n\r\n            return { text, skills, experience, education };\r\n        } catch (error) {\r\n            console.error('Error parsing resume:', error);\r\n            return { text: '', JobSkill: [], experience: { years: 0, positions: [] }, education: [] };\r\n        }\r\n    }\r\n\r\n    private extractSkills(text: string): string[] {\r\n        const lowerText = text.toLowerCase();\r\n        const foundSkills = new Set<string>();\r\n\r\n        this.skillKeywords.forEach(skill => {\r\n            if (lowerText.includes(skill.toLowerCase())) {\r\n                foundSkills.add(skill);\r\n            }\r\n        });\r\n\r\n        return Array.from(foundSkills);\r\n    }\r\n\r\n    private extractExperience(text: string): { years: number; positions: string[] } {\r\n        const positions: string[] = [];\r\n        let totalYears = 0;\r\n\r\n        // Look for job titles (common patterns)\r\n        const titlePatterns = [\r\n            /\\b(software engineer|developer|programmer|architect|lead|manager|analyst|consultant)\\b/gi,\r\n        ];\r\n\r\n        titlePatterns.forEach(pattern => {\r\n            const matches = text.match(pattern);\r\n            if (matches) {\r\n                matches.forEach(match => {\r\n                    if (!positions.includes(match)) {\r\n                        positions.push(match);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        // Extract years of experience (e.g., \"5 years\", \"3+ years\", \"2-4 years\")\r\n        const yearPatterns = [\r\n            /(\\d+)\\+?\\s*years?/gi,\r\n            /(\\d+)\\s*-\\s*(\\d+)\\s*years?/gi,\r\n        ];\r\n\r\n        yearPatterns.forEach(pattern => {\r\n            const matches = text.match(pattern);\r\n            if (matches && matches[0]) {\r\n                const numbers = matches[0].match(/\\d+/g);\r\n                if (numbers) {\r\n                    totalYears = Math.max(totalYears, parseInt(numbers[0], 10));\r\n                }\r\n            }\r\n        });\r\n\r\n        return { years: totalYears, positions: positions.slice(0, 5) };\r\n    }\r\n\r\n    private extractEducation(text: string): string[] {\r\n        const education: string[] = [];\r\n\r\n        const degreePatterns = [\r\n            /\\b(B\\.?Tech|B\\.?E|Bachelor of Technology|Bachelor of Engineering)\\b/gi,\r\n            /\\b(M\\.?Tech|M\\.?E|Master of Technology|Master of Engineering)\\b/gi,\r\n            /\\b(MBA|Master of Business Administration)\\b/gi,\r\n            /\\b(MCA|Master of Computer Applications)\\b/gi,\r\n            /\\b(B\\.?Sc|Bachelor of Science|M\\.?Sc|Master of Science)\\b/gi,\r\n            /\\b(Ph\\.?D|Doctorate)\\b/gi,\r\n        ];\r\n\r\n        degreePatterns.forEach(pattern => {\r\n            const matches = text.match(pattern);\r\n            if (matches) {\r\n                matches.forEach(match => {\r\n                    if (!education.includes(match)) {\r\n                        education.push(match);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        return education;\r\n    }\r\n}\r\n"],"names":["ResumeParserService","pdfParse","require","mammoth","parseResume","file","text","mimetype","data","buffer","result","extractRawText","value","skills","extractSkills","experience","extractExperience","education","extractEducation","error","console","JobSkill","years","positions","lowerText","toLowerCase","foundSkills","Set","skillKeywords","forEach","skill","includes","add","Array","from","totalYears","titlePatterns","pattern","matches","match","push","yearPatterns","numbers","Math","max","parseInt","slice","degreePatterns"],"mappings":"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"}