{"version":3,"sources":["../../../src/modules/resume-parser/resume-parser.service.ts"],"sourcesContent":["import { Injectable } from '@nestjs/common';\r\n\r\nconst pdfParse = require('pdf-parse');\r\n\r\nconst mammoth = require('mammoth');\r\n\r\nexport interface ParsedResumeData {\r\n  text: string;\r\n  JobSkill: string[];\r\n  experience: {\r\n    years: number;\r\n    positions: string[];\r\n  };\r\n  education: string[];\r\n}\r\n\r\n@Injectable()\r\nexport class ResumeParserService {\r\n  private readonly skillKeywords = [\r\n    'javascript',\r\n    'typescript',\r\n    'python',\r\n    'java',\r\n    'c++',\r\n    'c#',\r\n    'ruby',\r\n    'php',\r\n    'swift',\r\n    'kotlin',\r\n    'react',\r\n    'angular',\r\n    'vue',\r\n    'node',\r\n    'express',\r\n    'nestjs',\r\n    'django',\r\n    'flask',\r\n    'spring',\r\n    'mongodb',\r\n    'postgresql',\r\n    'mysql',\r\n    'redis',\r\n    'elasticsearch',\r\n    'aws',\r\n    'azure',\r\n    'gcp',\r\n    'docker',\r\n    'kubernetes',\r\n    'jenkins',\r\n    'git',\r\n    'linux',\r\n    'html',\r\n    'css',\r\n    'sass',\r\n    'tailwind',\r\n    'bootstrap',\r\n    'rest api',\r\n    'graphql',\r\n    'microservices',\r\n    'agile',\r\n    'scrum',\r\n    'machine learning',\r\n    'ai',\r\n    'data science',\r\n    'tensorflow',\r\n    'pytorch',\r\n  ];\r\n\r\n  async parseResume(file: Express.Multer.File): Promise<ParsedResumeData> {\r\n    let text = '';\r\n\r\n    try {\r\n      // Parse PDF\r\n      if (file.mimetype === 'application/pdf') {\r\n        const data = await pdfParse(file.buffer);\r\n        text = data.text;\r\n      }\r\n      // Parse DOC/DOCX\r\n      else if (\r\n        file.mimetype ===\r\n        'application/vnd.openxmlformats-officedocument.wordprocessingml.document' ||\r\n        file.mimetype === 'application/msword'\r\n      ) {\r\n        const result = await mammoth.extractRawText({ buffer: file.buffer });\r\n        text = result.value;\r\n      }\r\n\r\n      const skills = this.extractSkills(text);\r\n      const experience = this.extractExperience(text);\r\n      const education = this.extractEducation(text);\r\n\r\n      return { text, JobSkill: skills, experience, education };\r\n    } catch (error) {\r\n      console.error('Error parsing resume:', error);\r\n      return {\r\n        text: '',\r\n        JobSkill: [],\r\n        experience: { years: 0, positions: [] },\r\n        education: [],\r\n      };\r\n    }\r\n  }\r\n\r\n  private extractSkills(text: string): string[] {\r\n    const lowerText = text.toLowerCase();\r\n    const foundSkills = new Set<string>();\r\n\r\n    this.skillKeywords.forEach((skill) => {\r\n      if (lowerText.includes(skill.toLowerCase())) {\r\n        foundSkills.add(skill);\r\n      }\r\n    });\r\n\r\n    return Array.from(foundSkills);\r\n  }\r\n\r\n  private extractExperience(text: string): {\r\n    years: number;\r\n    positions: string[];\r\n  } {\r\n    const positions: string[] = [];\r\n    let totalYears = 0;\r\n\r\n    // Look for job titles (common patterns)\r\n    const titlePatterns = [\r\n      /\\b(software engineer|developer|programmer|architect|lead|manager|analyst|consultant)\\b/gi,\r\n    ];\r\n\r\n    titlePatterns.forEach((pattern) => {\r\n      const matches = text.match(pattern);\r\n      if (matches) {\r\n        matches.forEach((match) => {\r\n          if (!positions.includes(match)) {\r\n            positions.push(match);\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    // Extract years of experience (e.g., \"5 years\", \"3+ years\", \"2-4 years\")\r\n    const yearPatterns = [\r\n      /(\\d+)\\+?\\s*years?/gi,\r\n      /(\\d+)\\s*-\\s*(\\d+)\\s*years?/gi,\r\n    ];\r\n\r\n    yearPatterns.forEach((pattern) => {\r\n      const matches = text.match(pattern);\r\n      if (matches && matches[0]) {\r\n        const numbers = matches[0].match(/\\d+/g);\r\n        if (numbers) {\r\n          totalYears = Math.max(totalYears, parseInt(numbers[0], 10));\r\n        }\r\n      }\r\n    });\r\n\r\n    return { years: totalYears, positions: positions.slice(0, 5) };\r\n  }\r\n\r\n  private extractEducation(text: string): string[] {\r\n    const education: string[] = [];\r\n\r\n    const degreePatterns = [\r\n      /\\b(B\\.?Tech|B\\.?E|Bachelor of Technology|Bachelor of Engineering)\\b/gi,\r\n      /\\b(M\\.?Tech|M\\.?E|Master of Technology|Master of Engineering)\\b/gi,\r\n      /\\b(MBA|Master of Business Administration)\\b/gi,\r\n      /\\b(MCA|Master of Computer Applications)\\b/gi,\r\n      /\\b(B\\.?Sc|Bachelor of Science|M\\.?Sc|Master of Science)\\b/gi,\r\n      /\\b(Ph\\.?D|Doctorate)\\b/gi,\r\n    ];\r\n\r\n    degreePatterns.forEach((pattern) => {\r\n      const matches = text.match(pattern);\r\n      if (matches) {\r\n        matches.forEach((match) => {\r\n          if (!education.includes(match)) {\r\n            education.push(match);\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    return education;\r\n  }\r\n}\r\n"],"names":["ResumeParserService","pdfParse","require","mammoth","parseResume","file","text","mimetype","data","buffer","result","extractRawText","value","skills","extractSkills","experience","extractExperience","education","extractEducation","JobSkill","error","console","years","positions","lowerText","toLowerCase","foundSkills","Set","skillKeywords","forEach","skill","includes","add","Array","from","totalYears","titlePatterns","pattern","matches","match","push","yearPatterns","numbers","Math","max","parseInt","slice","degreePatterns"],"mappings":"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"}