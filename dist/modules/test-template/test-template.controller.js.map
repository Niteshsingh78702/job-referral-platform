{"version":3,"sources":["../../../src/modules/test-template/test-template.controller.ts"],"sourcesContent":["import {\r\n  Controller,\r\n  Get,\r\n  Post,\r\n  Put,\r\n  Delete,\r\n  Body,\r\n  Param,\r\n  Query,\r\n  UseGuards,\r\n} from '@nestjs/common';\r\nimport { JwtAuthGuard } from '../../common/guards/jwt-auth.guard';\r\nimport { RolesGuard } from '../../common/guards/roles.guard';\r\nimport { Roles } from '../../common/decorators/roles.decorator';\r\nimport { UserRole } from '../../common/constants';\r\nimport { TestTemplateService } from './test-template.service';\r\nimport {\r\n  CreateTestTemplateDto,\r\n  UpdateTestTemplateDto,\r\n  TemplateFiltersDto,\r\n  AssignTemplateDto,\r\n} from './dto';\r\n\r\n@Controller('admin/test-templates')\r\n@UseGuards(JwtAuthGuard, RolesGuard)\r\n@Roles(UserRole.ADMIN)\r\nexport class TestTemplateController {\r\n  constructor(private testTemplateService: TestTemplateService) {}\r\n\r\n  /**\r\n   * Create a new test template\r\n   */\r\n  @Post()\r\n  async createTemplate(@Body() dto: CreateTestTemplateDto) {\r\n    const template = await this.testTemplateService.createTemplate(dto);\r\n    return {\r\n      success: true,\r\n      message: 'Test template created successfully',\r\n      data: template,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get templates with filters and pagination\r\n   */\r\n  @Get()\r\n  async getTemplates(@Query() filters: TemplateFiltersDto) {\r\n    const result = await this.testTemplateService.getTemplates(filters);\r\n    return {\r\n      success: true,\r\n      data: result.templates,\r\n      pagination: result.pagination,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get a single template by ID\r\n   */\r\n  @Get(':id')\r\n  async getTemplate(@Param('id') id: string) {\r\n    const template = await this.testTemplateService.getTemplateById(id);\r\n    return {\r\n      success: true,\r\n      data: template,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Preview questions for a template\r\n   */\r\n  @Get(':id/preview')\r\n  async previewQuestions(\r\n    @Param('id') id: string,\r\n    @Query('count') count?: number,\r\n  ) {\r\n    const questions = await this.testTemplateService.previewQuestions(\r\n      id,\r\n      count || 10,\r\n    );\r\n    return {\r\n      success: true,\r\n      data: questions,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Update a template\r\n   */\r\n  @Put(':id')\r\n  async updateTemplate(\r\n    @Param('id') id: string,\r\n    @Body() dto: UpdateTestTemplateDto,\r\n  ) {\r\n    const template = await this.testTemplateService.updateTemplate(id, dto);\r\n    return {\r\n      success: true,\r\n      message: 'Test template updated successfully',\r\n      data: template,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Assign template to skill bucket\r\n   */\r\n  @Post(':id/assign')\r\n  async assignToSkillBucket(\r\n    @Param('id') id: string,\r\n    @Body() dto: AssignTemplateDto,\r\n  ) {\r\n    const result = await this.testTemplateService.assignToSkillBucket(id, dto);\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Unassign template from skill bucket\r\n   */\r\n  @Delete('skill-bucket/:skillBucketId')\r\n  async unassignFromSkillBucket(@Param('skillBucketId') skillBucketId: string) {\r\n    const result =\r\n      await this.testTemplateService.unassignFromSkillBucket(skillBucketId);\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Delete a template (soft delete)\r\n   */\r\n  @Delete(':id')\r\n  async deleteTemplate(@Param('id') id: string) {\r\n    await this.testTemplateService.deleteTemplate(id);\r\n    return {\r\n      success: true,\r\n      message: 'Test template deleted successfully',\r\n    };\r\n  }\r\n}\r\n"],"names":["TestTemplateController","createTemplate","dto","template","testTemplateService","success","message","data","getTemplates","filters","result","templates","pagination","getTemplate","id","getTemplateById","previewQuestions","count","questions","updateTemplate","assignToSkillBucket","unassignFromSkillBucket","skillBucketId","deleteTemplate","ADMIN"],"mappings":";;;;+BA0BaA;;;eAAAA;;;wBAhBN;8BACsB;4BACF;gCACL;2BACG;qCACW;qBAM7B;;;;;;;;;;;;;;;AAKA,IAAA,AAAMA,yBAAN,MAAMA;IAGX;;GAEC,GACD,MACMC,eAAe,AAAQC,GAA0B,EAAE;QACvD,MAAMC,WAAW,MAAM,IAAI,CAACC,mBAAmB,CAACH,cAAc,CAACC;QAC/D,OAAO;YACLG,SAAS;YACTC,SAAS;YACTC,MAAMJ;QACR;IACF;IAEA;;GAEC,GACD,MACMK,aAAa,AAASC,OAA2B,EAAE;QACvD,MAAMC,SAAS,MAAM,IAAI,CAACN,mBAAmB,CAACI,YAAY,CAACC;QAC3D,OAAO;YACLJ,SAAS;YACTE,MAAMG,OAAOC,SAAS;YACtBC,YAAYF,OAAOE,UAAU;QAC/B;IACF;IAEA;;GAEC,GACD,MACMC,YAAY,AAAaC,EAAU,EAAE;QACzC,MAAMX,WAAW,MAAM,IAAI,CAACC,mBAAmB,CAACW,eAAe,CAACD;QAChE,OAAO;YACLT,SAAS;YACTE,MAAMJ;QACR;IACF;IAEA;;GAEC,GACD,MACMa,iBACJ,AAAaF,EAAU,EACvB,AAAgBG,KAAc,EAC9B;QACA,MAAMC,YAAY,MAAM,IAAI,CAACd,mBAAmB,CAACY,gBAAgB,CAC/DF,IACAG,SAAS;QAEX,OAAO;YACLZ,SAAS;YACTE,MAAMW;QACR;IACF;IAEA;;GAEC,GACD,MACMC,eACJ,AAAaL,EAAU,EACvB,AAAQZ,GAA0B,EAClC;QACA,MAAMC,WAAW,MAAM,IAAI,CAACC,mBAAmB,CAACe,cAAc,CAACL,IAAIZ;QACnE,OAAO;YACLG,SAAS;YACTC,SAAS;YACTC,MAAMJ;QACR;IACF;IAEA;;GAEC,GACD,MACMiB,oBACJ,AAAaN,EAAU,EACvB,AAAQZ,GAAsB,EAC9B;QACA,MAAMQ,SAAS,MAAM,IAAI,CAACN,mBAAmB,CAACgB,mBAAmB,CAACN,IAAIZ;QACtE,OAAOQ;IACT;IAEA;;GAEC,GACD,MACMW,wBAAwB,AAAwBC,aAAqB,EAAE;QAC3E,MAAMZ,SACJ,MAAM,IAAI,CAACN,mBAAmB,CAACiB,uBAAuB,CAACC;QACzD,OAAOZ;IACT;IAEA;;GAEC,GACD,MACMa,eAAe,AAAaT,EAAU,EAAE;QAC5C,MAAM,IAAI,CAACV,mBAAmB,CAACmB,cAAc,CAACT;QAC9C,OAAO;YACLT,SAAS;YACTC,SAAS;QACX;IACF;IA1GA,YAAY,AAAQF,mBAAwC,CAAE;aAA1CA,sBAAAA;IAA2C;AA2GjE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mDA7GgBoB"}